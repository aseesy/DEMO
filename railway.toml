# Railway Configuration
# PostgreSQL-only production setup

[build]
builder = "nixpacks"
buildCommand = "cp -r chat-client-vite/dist chat-server/dist && cd chat-server && npm install --legacy-peer-deps"

[deploy]
startCommand = "cd chat-server && node server.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
healthcheckPath = "/health"
healthcheckTimeout = 1000

# Note: PostgreSQL service should be added separately in Railway dashboard
# Railway will automatically inject DATABASE_URL when PostgreSQL is connected
