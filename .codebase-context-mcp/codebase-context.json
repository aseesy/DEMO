{
  "project": {
    "name": "LiaiZen",
    "description": "Co-parenting communication platform helping separated parents communicate better for their children's wellbeing",
    "domain": "coparentliaizen.com",
    "mission": "Transform high-tension co-parenting exchanges into respectful, child-centric dialogue through intelligent mediation technology"
  },
  "architecture": {
    "type": "Monorepo",
    "structure": {
      "frontend": {
        "path": "chat-client-vite/",
        "framework": "React 18+ with Vite",
        "language": "JavaScript (JSX)",
        "styling": "Tailwind CSS v4",
        "stateManagement": "React hooks and context",
        "realtime": "Socket.io-client",
        "deployment": "Vercel (coparentliaizen.com)",
        "port": "5173 (dev)"
      },
      "backend": {
        "path": "chat-server/",
        "framework": "Node.js 18+ with Express.js",
        "language": "JavaScript",
        "database": "SQLite (with PostgreSQL migration path)",
        "realtime": "Socket.io",
        "ai": "OpenAI API for message mediation",
        "email": "Nodemailer (Gmail integration)",
        "deployment": "Railway (demo-production-6dcd.up.railway.app)",
        "port": "3000 (production)"
      }
    }
  },
  "keyFeatures": [
    "Real-time messaging between co-parents via WebSocket",
    "AI-powered message mediation to reduce conflict",
    "Contact management (co-parents, children, professionals)",
    "Task management for shared parenting responsibilities",
    "Room-based communication for private conversations",
    "Mobile/PWA support for accessibility"
  ],
  "designSystem": {
    "colors": {
      "primary": "#275559",
      "secondary": "#4DA8B0",
      "accent": "#6dd4b0",
      "focus": "#46BD92",
      "lightBackground": "#E6F7F5",
      "lighterBackground": "#C5E8E4"
    },
    "typography": {
      "fontFamily": "'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",
      "baseFontSize": "16px"
    },
    "spacing": {
      "navigationDesktop": "40px",
      "navigationMobile": "48px",
      "modalZIndex": "100",
      "navigationZIndex": "50"
    },
    "borderRadius": {
      "default": "0.75rem",
      "large": "1rem",
      "xl": "1.5rem"
    }
  },
  "commonPatterns": {
    "components": {
      "location": "chat-client-vite/src/components/",
      "namingConvention": "PascalCase.jsx",
      "structure": "Functional components with hooks",
      "exports": "Named exports preferred"
    },
    "modals": {
      "location": "chat-client-vite/src/components/modals/",
      "zIndex": "z-[100]",
      "backdrop": "bg-black/40",
      "positioning": "items-center justify-center",
      "padding": {
        "mobile": "pt-16 pb-24",
        "desktop": "pt-4 pb-4"
      },
      "container": "max-h-full",
      "pattern": "Fixed overlay with centered modal, responsive padding for mobile navigation"
    },
    "navigation": {
      "desktop": {
        "height": "h-10 (40px)",
        "logoHeight": "h-7 (28px)",
        "position": "top sticky"
      },
      "mobile": {
        "height": "h-12 (48px)",
        "iconSize": "w-6 h-6",
        "position": "bottom fixed",
        "layout": "Dashboard | LiaiZen Menu | Chat"
      }
    },
    "buttons": {
      "primary": "bg-[#275559] text-white hover:bg-[#1f4447]",
      "secondary": "bg-[#4DA8B0] text-white hover:bg-[#3d8a92]",
      "success": "bg-[#6dd4b0] text-black",
      "shape": "rounded-lg (not rounded-full)",
      "minHeight": "44px (touch-friendly)",
      "hoverEffect": "Shadow reduction + translateY"
    },
    "forms": {
      "inputHeight": "min-h-[44px]",
      "borderStyle": "border-2 border-gray-200",
      "focusStyle": "focus:border-[#275559]",
      "borderRadius": "rounded-lg sm:rounded-xl",
      "mobileFont": "16px (prevents iOS zoom)"
    }
  },
  "fileStructure": {
    "frontend": {
      "src/": {
        "components/": "React components (Navigation, ContactsPanel, TasksList, etc.)",
        "components/modals/": "Modal components (TaskFormModal, WelcomeModal, etc.)",
        "hooks/": "Custom React hooks (useTasks.js, useGooglePlaces.js, etc.)",
        "apiClient.js": "API client for backend communication",
        "config.js": "Configuration constants",
        "ChatRoom.jsx": "Main app container with routing logic",
        "index.css": "Global styles and Tailwind imports"
      }
    },
    "backend": {
      "server.js": "Express + Socket.io server setup",
      "db.js": "Database connection and queries (SQLite)",
      "auth.js": "Authentication middleware",
      "roomManager.js": "Room management logic",
      "aiMediator.js": "AI message mediation with OpenAI",
      "proactiveCoach.js": "Proactive AI coaching features",
      "threadManager.js": "Message threading logic",
      "emailService.js": "Email notifications"
    }
  },
  "apiEndpoints": {
    "authentication": ["POST /api/auth/register", "POST /api/auth/login", "POST /api/auth/google"],
    "users": ["GET /api/user/profile", "PUT /api/user/profile"],
    "contacts": [
      "GET /api/contacts",
      "POST /api/contacts",
      "PUT /api/contacts/:id",
      "DELETE /api/contacts/:id"
    ],
    "tasks": [
      "GET /api/tasks",
      "POST /api/tasks",
      "POST /api/tasks/generate (AI)",
      "PUT /api/tasks/:id",
      "DELETE /api/tasks/:id"
    ],
    "rooms": [
      "GET /api/rooms",
      "POST /api/rooms",
      "POST /api/rooms/invite",
      "POST /api/rooms/accept",
      "POST /api/rooms/decline"
    ],
    "messages": [
      "GET /api/messages/:roomId",
      "POST /api/messages (Socket.io event)",
      "POST /api/messages/flag"
    ]
  },
  "socketEvents": {
    "client": ["join-room", "send-message", "typing", "stop-typing", "disconnect"],
    "server": [
      "room-joined",
      "receive-message",
      "user-typing",
      "user-stopped-typing",
      "message-flagged",
      "ai-suggestion"
    ]
  },
  "databaseSchema": {
    "users": {
      "columns": [
        "id (INTEGER PRIMARY KEY)",
        "username (TEXT UNIQUE)",
        "email (TEXT UNIQUE)",
        "password_hash (TEXT)",
        "display_name (TEXT)",
        "profile_data (JSON)",
        "created_at (DATETIME)"
      ]
    },
    "contacts": {
      "columns": [
        "id (INTEGER PRIMARY KEY)",
        "user_id (INTEGER)",
        "contact_name (TEXT)",
        "relationship (TEXT)",
        "email (TEXT)",
        "phone (TEXT)",
        "address (TEXT)",
        "notes (TEXT)",
        "created_at (DATETIME)"
      ]
    },
    "tasks": {
      "columns": [
        "id (INTEGER PRIMARY KEY)",
        "user_id (INTEGER)",
        "title (TEXT)",
        "description (TEXT)",
        "status (TEXT)",
        "priority (TEXT)",
        "due_date (DATE)",
        "assigned_to (TEXT)",
        "related_people (JSON)",
        "created_at (DATETIME)"
      ]
    },
    "rooms": {
      "columns": [
        "id (INTEGER PRIMARY KEY)",
        "name (TEXT)",
        "creator_id (INTEGER)",
        "created_at (DATETIME)"
      ]
    },
    "room_members": {
      "columns": [
        "id (INTEGER PRIMARY KEY)",
        "room_id (INTEGER)",
        "user_id (INTEGER)",
        "status (TEXT)",
        "joined_at (DATETIME)"
      ]
    },
    "messages": {
      "columns": [
        "id (INTEGER PRIMARY KEY)",
        "room_id (INTEGER)",
        "sender_id (INTEGER)",
        "content (TEXT)",
        "original_content (TEXT)",
        "was_mediated (BOOLEAN)",
        "timestamp (DATETIME)"
      ]
    }
  },
  "developmentWorkflow": {
    "starting": ["npm run dev - Start all services", "npm run kill-ports - Kill conflicting ports"],
    "frontend": [
      "cd chat-client-vite && npm run dev",
      "Runs on http://localhost:5173",
      "Hot reload enabled (HMR)"
    ],
    "backend": [
      "cd chat-server && npm start",
      "Runs on http://localhost:3000",
      "Auto-restarts with nodemon"
    ],
    "deployment": {
      "frontend": "Vercel auto-deploys from main branch",
      "backend": "Railway auto-deploys from main branch"
    }
  },
  "corePhilosophies": [
    "Child-centered outcomes: Every feature benefits children's wellbeing",
    "Conflict reduction: Reduce misunderstandings between co-parents",
    "Privacy & Security: Sensitive family data must be protected",
    "Accessibility: Work for parents with varying technical skills",
    "Asynchronous communication: Support different time zones",
    "Mobile-first design: Optimized for mobile devices",
    "AI-assisted: Use AI to improve communication quality"
  ],
  "technicalDecisions": {
    "whyReact": "Component reusability, large ecosystem, easy state management",
    "whyTailwind": "Rapid development, consistent design, mobile-first utilities",
    "whySocketIO": "Real-time bidirectional communication for chat",
    "whyOpenAI": "Best-in-class language models for message mediation",
    "whySQLite": "Simple setup for development, easy migration to PostgreSQL",
    "whyVercel": "Optimized for React/Vite, automatic deployments, edge functions",
    "whyRailway": "Easy Node.js deployment, database hosting, affordable"
  },
  "commonIssues": {
    "modalOverlap": {
      "problem": "Modals being covered by navigation bar",
      "solution": "Use z-[100] for modals, z-50 for navigation, pb-24 mobile padding"
    },
    "mobileZoom": {
      "problem": "iOS zooms on input focus",
      "solution": "Set input font-size to 16px minimum"
    },
    "touchTargets": {
      "problem": "Buttons too small on mobile",
      "solution": "Minimum 44px height/width for touch targets"
    },
    "hotReload": {
      "problem": "Changes not appearing",
      "solution": "npm run kill-ports && npm run dev"
    }
  },
  "dependencies": {
    "frontend": {
      "core": ["react", "react-dom", "vite"],
      "ui": ["tailwindcss", "autoprefixer"],
      "realtime": ["socket.io-client"],
      "utilities": ["axios"]
    },
    "backend": {
      "core": ["express", "socket.io"],
      "database": ["better-sqlite3"],
      "auth": ["bcrypt", "jsonwebtoken"],
      "ai": ["openai"],
      "email": ["nodemailer"],
      "utilities": ["cors", "dotenv"]
    }
  },
  "environmentVariables": {
    "frontend": {
      "VITE_API_URL": "Backend API URL",
      "VITE_GOOGLE_PLACES_API_KEY": "Google Places API key for address autocomplete"
    },
    "backend": {
      "PORT": "Server port (default 3000)",
      "JWT_SECRET": "Secret for JWT token signing",
      "OPENAI_API_KEY": "OpenAI API key for AI mediation",
      "EMAIL_USER": "Gmail address for notifications",
      "EMAIL_PASS": "Gmail app password",
      "DATABASE_PATH": "Path to SQLite database file"
    }
  },
  "bestPractices": [
    "Always use design tokens from Design Tokens MCP",
    "Follow mobile-first responsive design",
    "Ensure 44px minimum touch targets",
    "Use z-[100] for modals, z-50 for navigation",
    "Add pt-16 pb-24 padding on mobile modals",
    "Never use emojis unless user requests",
    "Use functional components with hooks",
    "Keep components under 300 lines",
    "Extract reusable logic into custom hooks",
    "Use Tailwind utilities over custom CSS",
    "Test on mobile devices, not just desktop",
    "Validate all user input",
    "Handle errors gracefully with user-friendly messages",
    "Use meaningful git commit messages",
    "Document complex logic with comments"
  ]
}
